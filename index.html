<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Format Laporan Laba Rugi Koperasi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            padding: 30px;
            margin-bottom: 30px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 2px solid #2c5aa0;
        }
        
        h1 {
            color: #2c5aa0;
            margin-bottom: 10px;
            font-size: 28px;
        }
        
        h2 {
            color: #2c5aa0;
            margin: 25px 0 15px;
            padding-bottom: 8px;
            border-bottom: 1px solid #e0e0e0;
        }
        
        h3 {
            color: #3a6bc2;
            margin: 20px 0 10px;
        }
        
        .description {
            color: #666;
            font-size: 16px;
            max-width: 800px;
            margin: 0 auto 20px;
        }
        
        .controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 25px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background-color: #2c5aa0;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: background-color 0.3s;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        
        .btn:hover {
            background-color: #1e4070;
        }
        
        .btn-download {
            background-color: #28a745;
        }
        
        .btn-download:hover {
            background-color: #1e7e34;
        }
        
        .btn-clear {
            background-color: #dc3545;
        }
        
        .btn-clear:hover {
            background-color: #bd2130;
        }
        
        .btn-calculate {
            background-color: #17a2b8;
        }
        
        .btn-calculate:hover {
            background-color: #138496;
        }
        
        .btn-add {
            background-color: #6f42c1;
            font-size: 12px;
            padding: 6px 12px;
        }
        
        .btn-add:hover {
            background-color: #5a32a3;
        }
        
        .btn-remove {
            background-color: #ffc107;
            color: #212529;
            font-size: 12px;
            padding: 6px 12px;
        }
        
        .btn-remove:hover {
            background-color: #e0a800;
        }
        
        .btn-edit {
            background-color: #20c997;
            font-size: 12px;
            padding: 6px 12px;
        }
        
        .btn-edit:hover {
            background-color: #199d76;
        }
        
        .form-section {
            margin-bottom: 30px;
        }
        
        .input-group {
            margin-bottom: 15px;
            position: relative;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #444;
        }
        
        input[type="text"],
        input[type="number"] {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }
        
        input[type="text"]:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: #2c5aa0;
            box-shadow: 0 0 0 2px rgba(44, 90, 160, 0.2);
        }
        
        .financial-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        
        .financial-table th {
            background-color: #2c5aa0;
            color: white;
            text-align: left;
            padding: 12px 15px;
            font-weight: 600;
        }
        
        .financial-table td {
            padding: 10px 15px;
            border-bottom: 1px solid #eee;
            position: relative;
        }
        
        .financial-table tr:last-child td {
            border-bottom: none;
        }
        
        .financial-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .financial-table tr:hover {
            background-color: #f0f5ff;
        }
        
        .total-row {
            font-weight: bold;
            background-color: #e8f0fe !important;
        }
        
        .section-title {
            background-color: #e8f0fe;
            font-weight: bold;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .percentage-badge {
            display: inline-block;
            background-color: #e9f7fe;
            color: #2c5aa0;
            font-size: 12px;
            padding: 2px 8px;
            border-radius: 10px;
            margin-left: 8px;
            font-weight: 600;
        }
        
        .item-row {
            display: flex;
            gap: 10px;
            margin-bottom: 8px;
            align-items: center;
        }
        
        .item-name {
            flex: 1;
        }
        
        .item-amount {
            width: 200px;
        }
        
        .item-actions {
            display: flex;
            gap: 5px;
        }
        
        .edit-input {
            padding: 8px;
            border: 1px solid #2c5aa0;
            border-radius: 4px;
            width: 100%;
        }
        
        .note {
            background-color: #fff8e1;
            padding: 15px;
            border-radius: 5px;
            margin-top: 30px;
            border-left: 4px solid #ffc107;
        }
        
        .note h4 {
            color: #856404;
            margin-bottom: 10px;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            color: #777;
            font-size: 14px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        /* Styling untuk info icon */
        .info-icon {
            display: inline-block;
            margin-left: 8px;
            color: #2c5aa0;
            cursor: help;
            position: relative;
        }
        
        .info-icon:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background-color: #333;
            color: white;
            padding: 8px 12px;
            border-radius: 4px;
            font-size: 14px;
            white-space: nowrap;
            z-index: 10;
            margin-bottom: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        
        /* Modal popup */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal {
            background-color: white;
            border-radius: 8px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.2);
            animation: modalFadeIn 0.3s;
        }
        
        @keyframes modalFadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .modal-header {
            background-color: #2c5aa0;
            color: white;
            padding: 20px;
            border-radius: 8px 8px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h3 {
            color: white;
            margin: 0;
        }
        
        .close-modal {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            line-height: 1;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .info-category {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .category-icon {
            font-size: 24px;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            flex-shrink: 0;
        }
        
        .income-icon {
            background-color: #d4edda;
            color: #155724;
        }
        
        .expense-icon {
            background-color: #f8d7da;
            color: #721c24;
        }
        
        .shu-icon {
            background-color: #cce5ff;
            color: #004085;
        }
        
        .info-item {
            margin-bottom: 20px;
        }
        
        .info-item h4 {
            color: #2c5aa0;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .info-content {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #2c5aa0;
        }
        
        .info-content ul {
            margin-left: 20px;
            margin-bottom: 10px;
        }
        
        .info-content li {
            margin-bottom: 5px;
        }
        
        .example-box {
            background-color: #e9f7fe;
            border: 1px dashed #2c5aa0;
            padding: 12px;
            border-radius: 5px;
            margin-top: 10px;
        }
        
        .regulation-note {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin-top: 15px;
            border-radius: 0 5px 5px 0;
        }
        
        .quick-example {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .example-number {
            background-color: white;
            border: 1px solid #ddd;
            padding: 8px;
            border-radius: 4px;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s;
        }
        
        .example-number:hover {
            background-color: #f0f5ff;
            border-color: #2c5aa0;
        }
        
        .distribution-summary {
            background-color: #f8f9fa;
            border: 2px solid #2c5aa0;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .summary-item {
            background-color: white;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            padding: 12px;
        }
        
        .summary-item h5 {
            color: #2c5aa0;
            margin-bottom: 5px;
            font-size: 14px;
        }
        
        .summary-value {
            font-weight: bold;
            font-size: 16px;
            color: #333;
        }
        
        .summary-percentage {
            color: #28a745;
            font-size: 14px;
            font-weight: 600;
        }
        
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 20px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
                justify-content: center;
            }
            
            .financial-table {
                font-size: 14px;
            }
            
            .financial-table th,
            .financial-table td {
                padding: 8px 10px;
            }
            
            .modal {
                width: 95%;
            }
            
            .quick-example {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .summary-grid {
                grid-template-columns: 1fr;
            }
            
            .item-row {
                flex-direction: column;
                align-items: stretch;
            }
            
            .item-amount {
                width: 100%;
            }
            
            .item-actions {
                justify-content: flex-start;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <!-- Modal Popup Informasi -->
    <div class="modal-overlay" id="infoModal">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modalTitle">Informasi Detail</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <!-- Konten akan diisi oleh JavaScript -->
            </div>
        </div>
    </div>
    
    <div class="container">
        <header>
            <h1><i class="fas fa-hand-holding-usd"></i> FORMAT LAPORAN LABA RUGI KOPERASI</h1>
            <p class="description">Format laporan keuangan tahunan koperasi sesuai dengan standar akuntansi koperasi Indonesia</p>
        </header>
        
        <div class="form-section">
            <h2><i class="fas fa-info-circle"></i> Informasi Koperasi</h2>
            <div class="input-group">
                <label for="nama-koperasi">Nama Koperasi</label>
                <input type="text" id="nama-koperasi" placeholder="Contoh: Koperasi Sejahtera Mandiri">
            </div>
            <div class="input-group">
                <label for="periode-laporan">Periode Laporan (Tahun)</label>
                <input type="text" id="periode-laporan" placeholder="Contoh: 2023" value="2023">
            </div>
            <div class="input-group">
                <label for="satuan-mata-uang">Satuan Mata Uang</label>
                <input type="text" id="satuan-mata-uang" placeholder="Contoh: Rupiah (Rp)" value="Rupiah (Rp)">
            </div>
        </div>
        
        <div class="controls">
            <button class="btn" id="isi-contoh-btn">
                <i class="fas fa-magic"></i> Isi Data Contoh
            </button>
            <button class="btn btn-calculate" id="calculate-shu-btn">
                <i class="fas fa-calculator"></i> Hitung Otomatis SHU
            </button>
            <button class="btn btn-clear" id="clear-btn">
                <i class="fas fa-broom"></i> Hapus Data
            </button>
            <button class="btn btn-download" id="download-btn">
                <i class="fas fa-download"></i> Download Excel
            </button>
        </div>
        
        <h2><i class="fas fa-file-invoice-dollar"></i> Format Laporan Laba Rugi</h2>
        
        <!-- Bagian Pendapatan -->
        <div class="form-section">
            <div class="section-header">
                <h3>A. PENDAPATAN</h3>
                <button class="btn btn-add" id="add-pendapatan-btn">
                    <i class="fas fa-plus"></i> Tambah Item Pendapatan
                </button>
            </div>
            
            <div id="pendapatan-list">
                <!-- Item Pendapatan dari Anggota -->
                <div class="item-row" id="pendapatan-anggota-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Pendapatan dari Anggota" 
                               data-id="pendapatan-anggota" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="pendapatan-anggota" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('pendapatan-anggota')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('pendapatan-anggota-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Pendapatan Operasional -->
                <div class="item-row" id="pendapatan-operasional-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Pendapatan Operasional" 
                               data-id="pendapatan-operasional" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="pendapatan-operasional" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('pendapatan-operasional')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('pendapatan-operasional-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Pendapatan Non-Operasional -->
                <div class="item-row" id="pendapatan-non-operasional-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Pendapatan Non-Operasional" 
                               data-id="pendapatan-non-operasional" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="pendapatan-non-operasional" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('pendapatan-non-operasional')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('pendapatan-non-operasional-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Pendapatan Lain-lain -->
                <div class="item-row" id="pendapatan-lain-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Pendapatan Lain-lain" 
                               data-id="pendapatan-lain" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="pendapatan-lain" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('pendapatan-lain')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('pendapatan-lain-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="total-row" style="padding: 15px; margin-top: 10px; border-radius: 5px;">
                <strong>TOTAL PENDAPATAN: <span id="total-pendapatan">0</span></strong>
            </div>
        </div>
        
        <!-- Bagian Beban -->
        <div class="form-section">
            <div class="section-header">
                <h3>B. BEBAN</h3>
                <button class="btn btn-add" id="add-beban-btn">
                    <i class="fas fa-plus"></i> Tambah Item Beban
                </button>
            </div>
            
            <div id="beban-list">
                <!-- Item Beban Operasional -->
                <div class="item-row" id="beban-operasional-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Beban Operasional" 
                               data-id="beban-operasional" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="beban-operasional" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('beban-operasional')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('beban-operasional-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Beban Administrasi dan Umum -->
                <div class="item-row" id="beban-administrasi-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Beban Administrasi dan Umum" 
                               data-id="beban-administrasi" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="beban-administrasi" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('beban-administrasi')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('beban-administrasi-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Beban Penyusutan -->
                <div class="item-row" id="beban-penyusutan-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Beban Penyusutan" 
                               data-id="beban-penyusutan" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="beban-penyusutan" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('beban-penyusutan')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('beban-penyusutan-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Beban Lain-lain -->
                <div class="item-row" id="beban-lain-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Beban Lain-lain" 
                               data-id="beban-lain" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="beban-lain" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('beban-lain')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('beban-lain-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="total-row" style="padding: 15px; margin-top: 10px; border-radius: 5px;">
                <strong>TOTAL BEBAN: <span id="total-beban">0</span></strong>
            </div>
        </div>
        
        <!-- Bagian Laba/Rugi -->
        <div class="form-section">
            <h3>C. LABA/RUGI SEBELUM SHU</h3>
            
            <div class="item-row">
                <div class="item-name">
                    <span>Laba/Rugi Sebelum SHU (Total Pendapatan - Total Beban)</span>
                </div>
                <div class="item-amount">
                    <span id="laba-rugi-sebelum-shu">0</span>
                </div>
                <div class="item-actions">
                    <button class="btn btn-edit" onclick="showInfoModal('laba-rugi-sebelum-shu')">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
            
            <div class="item-row">
                <div class="item-name">
                    <input type="text" class="edit-input" value="Sisa Hasil Usaha (SHU) yang Dibagikan" 
                           data-id="shu-dibagikan" onchange="updateItemName(this)">
                </div>
                <div class="item-amount">
                    <input type="number" id="shu-dibagikan" value="0" 
                           placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                </div>
                <div class="item-actions">
                    <button class="btn btn-edit" onclick="showInfoModal('shu-dibagikan')">
                        <i class="fas fa-info-circle"></i>
                    </button>
                </div>
            </div>
            
            <div class="total-row" style="padding: 15px; margin-top: 10px; border-radius: 5px;">
                <strong>LABA/RUGI BERSIH: <span id="laba-rugi-bersih">0</span></strong>
            </div>
        </div>
        
        <!-- Bagian Alokasi SHU -->
        <div class="form-section">
            <div class="section-header">
                <h3>D. ALOKASI SISA HASIL USAHA (SHU)</h3>
                <button class="btn btn-add" id="add-shu-btn">
                    <i class="fas fa-plus"></i> Tambah Item Alokasi SHU
                </button>
            </div>
            
            <div id="shu-list">
                <!-- Item Dana Modal/Simpanan -->
                <div class="item-row" id="dana-modal-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Modal/Simpanan" 
                               data-id="dana-modal" onchange="updateItemName(this)">
                        <span class="percentage-badge">40%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-modal" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-modal')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-modal-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Poin Belanja -->
                <div class="item-row" id="poin-belanja-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Poin Belanja" 
                               data-id="poin-belanja" onchange="updateItemName(this)">
                        <span class="percentage-badge">5%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="poin-belanja" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('poin-belanja')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('poin-belanja-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Cadangan -->
                <div class="item-row" id="cadangan-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Cadangan" 
                               data-id="cadangan" onchange="updateItemName(this)">
                        <span class="percentage-badge">20%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="cadangan" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('cadangan')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('cadangan-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Pengurus -->
                <div class="item-row" id="dana-pengurus-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Pengurus" 
                               data-id="dana-pengurus" onchange="updateItemName(this)">
                        <span class="percentage-badge">7%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-pengurus" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-pengurus')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-pengurus-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Pengawas -->
                <div class="item-row" id="dana-pengawas-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Pengawas" 
                               data-id="dana-pengawas" onchange="updateItemName(this)">
                        <span class="percentage-badge">5%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-pengawas" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-pengawas')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-pengawas-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Karyawan -->
                <div class="item-row" id="dana-karyawan-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Karyawan" 
                               data-id="dana-karyawan" onchange="updateItemName(this)">
                        <span class="percentage-badge">5%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-karyawan" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-karyawan')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-karyawan-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Sosial -->
                <div class="item-row" id="dana-sosial-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Sosial" 
                               data-id="dana-sosial" onchange="updateItemName(this)">
                        <span class="percentage-badge">5%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-sosial" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-sosial')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-sosial-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Pendidikan -->
                <div class="item-row" id="dana-pendidikan-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Pendidikan" 
                               data-id="dana-pendidikan" onchange="updateItemName(this)">
                        <span class="percentage-badge">3%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-pendidikan" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-pendidikan')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-pendidikan-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
                
                <!-- Item Dana Pembangunan -->
                <div class="item-row" id="dana-pembangunan-row">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Dana Pembangunan" 
                               data-id="dana-pembangunan" onchange="updateItemName(this)">
                        <span class="percentage-badge">10%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="dana-pembangunan" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-edit" onclick="showInfoModal('dana-pembangunan')">
                            <i class="fas fa-info-circle"></i>
                        </button>
                        <button class="btn btn-remove" onclick="removeItem('dana-pembangunan-row')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="total-row" style="padding: 15px; margin-top: 10px; border-radius: 5px;">
                <strong>TOTAL ALOKASI SHU: <span id="total-alokasi-shu">0</span></strong>
            </div>
        </div>
        
        <!-- Ringkasan Distribusi -->
        <div class="distribution-summary">
            <h3><i class="fas fa-chart-pie"></i> Ringkasan Distribusi SHU</h3>
            <div class="summary-grid" id="distributionSummary">
                <!-- Ringkasan akan diisi oleh JavaScript -->
            </div>
        </div>
        
        <div class="note">
            <h4><i class="fas fa-lightbulb"></i> Catatan Penting:</h4>
            <p>1. Klik ikon <i class="fas fa-info-circle" style="color: #2c5aa0;"></i> untuk informasi detail setiap item.</p>
            <p>2. Klik tombol <i class="fas fa-plus" style="color: #6f42c1;"></i> untuk menambah item baru.</p>
            <p>3. Edit nama item dengan mengubah teks di kolom nama.</p>
            <p>4. Format ini sesuai dengan standar akuntansi koperasi Indonesia.</p>
            <p>5. Total alokasi SHU harus sama dengan jumlah SHU yang dibagikan.</p>
            <p>6. Gunakan tombol "Hitung Otomatis SHU" untuk menghitung alokasi berdasarkan persentase.</p>
            <p>7. Laporan ini harus ditandatangani oleh pengurus dan pengawas koperasi.</p>
        </div>
        
        <footer>
            <p>Format Laporan Laba Rugi Koperasi &copy; 2023 - Standar Akuntansi Koperasi Indonesia</p>
        </footer>
    </div>

    <script>
        // Data persentase alokasi SHU
        const shuPercentages = {
            'dana-modal': 40,      // Dana Modal/Simpanan
            'poin-belanja': 5,     // Poin Belanja
            'cadangan': 20,         // Cadangan
            'dana-pengurus': 7,    // Dana Pengurus
            'dana-pengawas': 5,    // Dana Pengawas
            'dana-karyawan': 5,    // Dana Karyawan
            'dana-sosial': 5,      // Dana Sosial
            'dana-pendidikan': 3,  // Dana Pendidikan
            'dana-pembangunan': 10 // Dana Pembangunan
        };
        
        // Data informasi untuk setiap item
        const infoData = {
            'pendapatan-anggota': {
                title: 'Pendapatan dari Anggota',
                category: 'income',
                definition: 'Semua penerimaan yang berasal dari transaksi dengan anggota koperasi.',
                examples: [
                    'Jasa pinjaman kepada anggota (bunga pinjaman)',
                    'Bunga simpanan berjangka anggota',
                    'Administrasi dan provisi kredit anggota',
                    'Fee layanan kepada anggota'
                ],
                sources: [
                    'Laporan unit simpan pinjam',
                    'Bukti penerimaan kas/bank',
                    'Rekening koran bank',
                    'Kwitansi penerimaan'
                ],
                tips: [
                    'Pisahkan antara simpanan (modal) dan pendapatan jasa',
                    'Catat sesuai periode akrual (saat terjadinya transaksi)',
                    'Cocokkan dengan laporan keuangan unit',
                    'Gunakan kode akun yang konsisten'
                ],
                regulation: 'Diatur dalam AD/ART koperasi dan PSAK No. 27 (Akuntansi Koperasi)',
                exampleNumbers: [5000000, 10000000, 25000000, 50000000]
            },
            'pendapatan-operasional': {
                title: 'Pendapatan Operasional',
                category: 'income',
                definition: 'Pendapatan dari kegiatan usaha utama koperasi.',
                examples: [
                    'Penjualan barang di toko koperasi',
                    'Pendapatan jasa (fotokopi, komputer, dll)',
                    'Fee dari kerja sama usaha',
                    'Pendapatan sewa aset koperasi'
                ],
                sources: [
                    'Nota penjualan/kasir',
                    'Faktur penjualan',
                    'Laporan keuangan unit usaha',
                    'Bukti penerimaan'
                ],
                tips: [
                    'Pisahkan per jenis usaha/unit',
                    'Catat setiap hari dan rekapitulasi bulanan',
                    'Cocokkan dengan stok barang terjual',
                    'Perhatikan potongan dan retur penjualan'
                ],
                regulation: 'PSAK No. 23 tentang Pendapatan',
                exampleNumbers: [15000000, 30000000, 50000000, 75000000]
            },
            'pendapatan-non-operasional': {
                title: 'Pendapatan Non-Operasional',
                category: 'income',
                definition: 'Pendapatan yang tidak berasal dari kegiatan usaha utama koperasi.',
                examples: [
                    'Pendapatan bunga deposito bank',
                    'Dividen dari investasi',
                    'Keuntungan penjualan aset tetap',
                    'Pendapatan sewa di luar usaha utama'
                ],
                sources: [
                    'Bukti bunga bank (bilyet)',
                    'Kwitansi penjualan aset',
                    'Laporan investasi',
                    'Perjanjian sewa menyewa'
                ],
                tips: [
                    'Pisahkan jelas dari pendapatan operasional',
                    'Catat saat diterima (cash basis)',
                    'Dokumen pendukung harus lengkap',
                    'Perhatikan perlakuan pajak'
                ],
                regulation: 'PSAK No. 23 tentang Pendapatan',
                exampleNumbers: [2000000, 5000000, 10000000, 15000000]
            },
            'pendapatan-lain': {
                title: 'Pendapatan Lain-lain',
                category: 'income',
                definition: 'Pendapatan yang tidak dapat dikategorikan sebagai pendapatan operasional maupun non-operasional.',
                examples: [
                    'Pendapatan denda keterlambatan',
                    'Sumbangan/hibah',
                    'Selisih kurs (gain)',
                    'Pendapatan lain yang tidak biasa'
                ],
                sources: [
                    'Bukti penerimaan kas',
                    'Nota/kwitansi',
                    'Laporan bank (untuk selisih kurs)',
                    'Surat perjanjian hibah'
                ],
                tips: [
                    'Jangan terlalu sering muncul (indikasi salah klasifikasi)',
                    'Dokumentasi harus jelas dan lengkap',
                    'Evaluasi apakah bisa dikategorikan lain',
                    'Transparan dalam pelaporan'
                ],
                regulation: 'PSAK No. 23 tentang Pendapatan',
                exampleNumbers: [500000, 1000000, 3000000, 5000000]
            },
            'beban-operasional': {
                title: 'Beban Operasional',
                category: 'expense',
                definition: 'Beban yang langsung terkait dengan kegiatan usaha utama koperasi.',
                examples: [
                    'Harga pokok penjualan (HPP)',
                    'Biaya bahan baku',
                    'Upah tenaga kerja langsung',
                    'Biaya penjualan dan pemasaran'
                ],
                sources: [
                    'Faktur pembelian',
                    'Kwitansi pengeluaran kas',
                    'Slip gaji',
                    'Nota pembelian barang dagangan'
                ],
                tips: [
                    'Hitung HPP dengan benar',
                    'Pisahkan beban tetap dan variabel',
                    'Alokasikan jika untuk beberapa produk',
                    'Pantai anggaran vs realisasi'
                ],
                regulation: 'PSAK No. 2 tentang Laporan Arus Kas',
                exampleNumbers: [8000000, 15000000, 25000000, 40000000]
            },
            'beban-administrasi': {
                title: 'Beban Administrasi dan Umum',
                category: 'expense',
                definition: 'Beban untuk menjalankan organisasi dan administrasi koperasi.',
                examples: [
                    'Gaji pengurus dan staf administrasi',
                    'Biaya listrik, air, telepon',
                    'Perlengkapan kantor',
                    'Sewa gedung/kantor'
                ],
                sources: [
                    'Slip gaji',
                    'Tagihan PLN/PDAM',
                    'Faktur pembelian ATK',
                    'Kwitansi sewa'
                ],
                tips: [
                    'Buat klasifikasi yang detail',
                    'Monitor pengeluaran rutin',
                    'Bandikan dengan anggaran',
                    'Optimalkan efisiensi'
                ],
                regulation: 'PSAK No. 2 tentang Laporan Arus Kas',
                exampleNumbers: [5000000, 10000000, 15000000, 20000000]
            },
            'beban-penyusutan': {
                title: 'Beban Penyusutan',
                category: 'expense',
                definition: 'Alokasi harga perolehan aset tetap selama masa manfaatnya.',
                examples: [
                    'Penyusutan gedung/kantor',
                    'Penyusutan kendaraan operasional',
                    'Penyusutan peralatan kantor',
                    'Penyusutan mesin/peralatan'
                ],
                sources: [
                    'Kartu aset tetap',
                    'Perhitungan penyusutan',
                    'Daftar inventaris aset',
                    'Laporan depresiasi'
                ],
                tips: [
                    'Gunakan metode penyusutan yang konsisten',
                    'Perhatikan masa manfaat aset',
                    'Update nilai residu jika perlu',
                    'Buat jadwal penyusutan tahunan'
                ],
                regulation: 'PSAK No. 16 tentang Aset Tetap',
                exampleNumbers: [1000000, 2500000, 5000000, 7500000]
            },
            'beban-lain': {
                title: 'Beban Lain-lain',
                category: 'expense',
                definition: 'Beban yang tidak dapat dikategorikan dalam beban operasional, administrasi, atau penyusutan.',
                examples: [
                    'Beban bunga pinjaman',
                    'Kerugian piutang',
                    'Beban pelatihan',
                    'Beban rapat dan konsultasi'
                ],
                sources: [
                    'Rekening koran bank (bunga)',
                    'Berita acara penghapusan piutang',
                    'Kwitansi pelatihan',
                    'Nota rapat/konsultasi'
                ],
                tips: [
                    'Minimalkan pos ini',
                    'Dokumentasi harus lengkap',
                    'Evaluasi apakah bisa dikategorikan lain',
                    'Transparan dalam pelaporan'
                ],
                regulation: 'PSAK No. 2 tentang Laporan Arus Kas',
                exampleNumbers: [500000, 1500000, 3000000, 5000000]
            },
            'laba-rugi-sebelum-shu': {
                title: 'Laba/Rugi Sebelum SHU',
                category: 'shu',
                definition: 'Selisih antara total pendapatan dan total beban sebelum dialokasikan sebagai Sisa Hasil Usaha.',
                examples: [
                    'Dihitung: Total Pendapatan - Total Beban',
                    'Positif = Laba',
                    'Negatif = Rugi'
                ],
                sources: [
                    'Perhitungan dari laporan laba rugi',
                    'Rekapitulasi pendapatan dan beban'
                ],
                tips: [
                    'Pastikan semua pendapatan dan beban tercatat',
                    'Verifikasi perhitungan',
                    'Analisis jika ada perubahan signifikan',
                    'Bandingkan dengan tahun sebelumnya'
                ],
                regulation: 'PSAK No. 27 tentang Akuntansi Koperasi',
                exampleNumbers: [5000000, 10000000, 20000000, 30000000]
            },
            'shu-dibagikan': {
                title: 'Sisa Hasil Usaha (SHU) yang Dibagikan',
                category: 'shu',
                definition: 'Bagian dari laba bersih yang akan dialokasikan sesuai dengan AD/ART koperasi.',
                examples: [
                    'Ditetapkan dalam Rapat Anggota Tahunan (RAT)',
                    'Biasanya 70-90% dari laba bersih',
                    'Di luar cadangan wajib'
                ],
                sources: [
                    'Keputusan Rapat Anggota Tahunan',
                    'Notulen RAT',
                    'Perhitungan laba bersih'
                ],
                tips: [
                    'Harus disetujui RAT',
                    'Perhatikan proporsi yang sehat',
                    'Sesuaikan dengan kebutuhan koperasi',
                    'Transparan kepada anggota'
                ],
                regulation: 'UU No. 25 Tahun 1992 tentang Perkoperasian',
                exampleNumbers: [3000000, 7500000, 15000000, 22500000]
            },
            'dana-modal': {
                title: 'Dana Modal/Simpanan',
                category: 'shu',
                definition: 'Bagian dari SHU yang dialokasikan untuk memperkuat modal koperasi dan simpanan anggota.',
                examples: [
                    'Tambahan modal koperasi',
                    'Peningkatan simpanan pokok/wajib',
                    'Penguatan modal kerja'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 40%'
                ],
                tips: [
                    'Persentase terbesar (40%)',
                    'Digunakan untuk pengembangan usaha',
                    'Dapat meningkatkan kapasitas koperasi',
                    'Dicatat sebagai tambahan modal'
                ],
                regulation: 'AD/ART Koperasi dan UU No. 25/1992',
                exampleNumbers: [2000000, 4000000, 8000000, 12000000]
            },
            'poin-belanja': {
                title: 'Poin Belanja',
                category: 'shu',
                definition: 'Bagian dari SHU yang dialokasikan sebagai reward/poin untuk anggota yang berbelanja di koperasi.',
                examples: [
                    'Poin loyalitas anggota',
                    'Cashback belanja',
                    'Reward program'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 5%'
                ],
                tips: [
                    'Meningkatkan loyalitas anggota',
                    'Berdasarkan transaksi belanja',
                    'Dapat ditukar dengan barang atau potongan',
                    'Transparan dalam perhitungan poin'
                ],
                regulation: 'AD/ART Koperasi',
                exampleNumbers: [250000, 500000, 1000000, 1500000]
            },
            'cadangan': {
                title: 'Cadangan',
                category: 'shu',
                definition: 'Bagian dari SHU yang disisihkan untuk cadangan koperasi.',
                examples: [
                    'Cadangan risiko usaha',
                    'Cadangan ekspansi',
                    'Cadangan tidak terduga'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 20%'
                ],
                tips: [
                    'Minimal sesuai ketentuan AD/ART',
                    'Digunakan untuk antisipasi risiko',
                    'Tidak boleh dibagikan kepada anggota',
                    'Dicatat di ekuitas koperasi'
                ],
                regulation: 'UU No. 25 Tahun 1992 Pasal 55',
                exampleNumbers: [1000000, 2000000, 4000000, 6000000]
            },
            'dana-pengurus': {
                title: 'Dana Pengurus',
                category: 'shu',
                definition: 'Bagian dari SHU untuk honorarium/imbalan pengurus koperasi.',
                examples: [
                    'Honorarium pengurus',
                    'Insentif kinerja pengurus',
                    'Tunjangan pengurus'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 7%'
                ],
                tips: [
                    'Proporsional dengan kinerja',
                    'Transparan dalam penentuan besaran',
                    'Dibayarkan setelah disetujui RAT',
                    'Pertimbangkan beban kerja'
                ],
                regulation: 'PP No. 9 Tahun 1995 tentang Pelaksanaan Kegiatan Usaha Koperasi',
                exampleNumbers: [350000, 700000, 1400000, 2100000]
            },
            'dana-pengawas': {
                title: 'Dana Pengawas',
                category: 'shu',
                definition: 'Bagian dari SHU untuk honorarium/imbalan pengawas koperasi.',
                examples: [
                    'Honorarium pengawas',
                    'Insentif pengawasan',
                    'Tunjangan pengawas'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 5%'
                ],
                tips: [
                    'Proporsional dengan tugas pengawasan',
                    'Transparan dalam penentuan besaran',
                    'Dibayarkan setelah disetujui RAT',
                    'Pertimbangkan kompleksitas pengawasan'
                ],
                regulation: 'PP No. 9 Tahun 1995 tentang Pelaksanaan Kegiatan Usaha Koperasi',
                exampleNumbers: [250000, 500000, 1000000, 1500000]
            },
            'dana-karyawan': {
                title: 'Dana Karyawan',
                category: 'shu',
                definition: 'Bagian dari SHU untuk bonus/imbalan karyawan koperasi.',
                examples: [
                    'Bonus karyawan',
                    'Insentif kinerja',
                    'Tunjangan prestasi'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 5%'
                ],
                tips: [
                    'Sesuaikan dengan kontribusi karyawan',
                    'Transparan dalam penentuan besaran',
                    'Dibayarkan setelah disetujui RAT',
                    'Pertimbangkan masa kerja dan kinerja'
                ],
                regulation: 'PP No. 9 Tahun 1995 tentang Pelaksanaan Kegiatan Usaha Koperasi',
                exampleNumbers: [250000, 500000, 1000000, 1500000]
            },
            'dana-sosial': {
                title: 'Dana Sosial',
                category: 'shu',
                definition: 'Bagian dari SHU untuk kegiatan sosial kemasyarakatan.',
                examples: [
                    'Bantuan sosial anggota',
                    'Program masyarakat sekitar',
                    'Kegiatan filantropi',
                    'Bencana alam'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 5%'
                ],
                tips: [
                    'Sesuaikan dengan kemampuan koperasi',
                    'Fokus pada anggota dan masyarakat sekitar',
                    'Transparan dalam penyaluran',
                    'Dokumentasi kegiatan sosial'
                ],
                regulation: 'PP No. 9 Tahun 1995 tentang Pelaksanaan Kegiatan Usaha Koperasi',
                exampleNumbers: [250000, 500000, 1000000, 1500000]
            },
            'dana-pendidikan': {
                title: 'Dana Pendidikan',
                category: 'shu',
                definition: 'Bagian dari SHU untuk kegiatan pendidikan dan pelatihan.',
                examples: [
                    'Pelatihan anggota',
                    'Pendidikan pengurus dan karyawan',
                    'Program literasi keuangan',
                    'Seminar dan workshop'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 3%'
                ],
                tips: [
                    'Fokus pada peningkatan kapasitas',
                    'Rencanakan program yang bermanfaat',
                    'Evaluasi hasil pendidikan',
                    'Prioritaskan kebutuhan anggota'
                ],
                regulation: 'PP No. 9 Tahun 1995 tentang Pelaksanaan Kegiatan Usaha Koperasi',
                exampleNumbers: [150000, 300000, 600000, 900000]
            },
            'dana-pembangunan': {
                title: 'Dana Pembangunan',
                category: 'shu',
                definition: 'Bagian dari SHU untuk pembangunan dan pengembangan sarana prasarana koperasi.',
                examples: [
                    'Renovasi gedung',
                    'Pembelian peralatan baru',
                    'Pengembangan sistem',
                    'Infrastruktur koperasi'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU',
                    'Perhitungan sesuai persentase 10%'
                ],
                tips: [
                    'Untuk investasi jangka panjang',
                    'Sesuaikan dengan rencana pengembangan',
                    'Prioritaskan kebutuhan mendesak',
                    'Monitor penggunaan dana'
                ],
                regulation: 'AD/ART Koperasi',
                exampleNumbers: [500000, 1000000, 2000000, 3000000]
            }
        };
        
        // Counter untuk item baru
        let pendapatanCounter = 0;
        let bebanCounter = 0;
        let shuCounter = 0;
        
        // Fungsi untuk menghitung total
        function hitungTotal() {
            // Hitung total pendapatan
            let totalPendapatan = 0;
            const pendapatanItems = document.querySelectorAll('#pendapatan-list input[type="number"]');
            pendapatanItems.forEach(input => {
                totalPendapatan += parseFloat(input.value) || 0;
            });
            document.getElementById('total-pendapatan').textContent = formatRupiah(totalPendapatan);
            
            // Hitung total beban
            let totalBeban = 0;
            const bebanItems = document.querySelectorAll('#beban-list input[type="number"]');
            bebanItems.forEach(input => {
                totalBeban += parseFloat(input.value) || 0;
            });
            document.getElementById('total-beban').textContent = formatRupiah(totalBeban);
            
            // Hitung laba rugi sebelum SHU
            const labaRugiSebelumSHU = totalPendapatan - totalBeban;
            document.getElementById('laba-rugi-sebelum-shu').textContent = formatRupiah(labaRugiSebelumSHU);
            
            // Hitung laba rugi bersih
            const shuDibagikan = parseFloat(document.getElementById('shu-dibagikan').value) || 0;
            const labaRugiBersih = labaRugiSebelumSHU - shuDibagikan;
            document.getElementById('laba-rugi-bersih').textContent = formatRupiah(labaRugiBersih);
            
            // Hitung total alokasi SHU
            let totalAlokasiSHU = 0;
            const shuItems = document.querySelectorAll('#shu-list input[type="number"]');
            shuItems.forEach(input => {
                totalAlokasiSHU += parseFloat(input.value) || 0;
            });
            document.getElementById('total-alokasi-shu').textContent = formatRupiah(totalAlokasiSHU);
            
            // Update ringkasan distribusi
            updateDistributionSummary(shuDibagikan);
        }
        
        // Fungsi untuk menghitung alokasi SHU otomatis berdasarkan persentase
        function hitungAlokasiSHU() {
            const shuDibagikan = parseFloat(document.getElementById('shu-dibagikan').value) || 0;
            
            if (shuDibagikan <= 0) {
                alert('Masukkan jumlah SHU yang dibagikan terlebih dahulu.');
                return;
            }
            
            // Hitung alokasi berdasarkan persentase untuk item yang ada
            for (const [id, percentage] of Object.entries(shuPercentages)) {
                const input = document.getElementById(id);
                if (input) {
                    input.value = Math.round(shuDibagikan * percentage / 100);
                }
            }
            
            // Hitung ulang total
            hitungTotal();
            
            alert('Alokasi SHU telah dihitung otomatis berdasarkan persentase.');
        }
        
        // Update ringkasan distribusi SHU
        function updateDistributionSummary(shuTotal) {
            const summaryContainer = document.getElementById('distributionSummary');
            
            if (shuTotal <= 0) {
                summaryContainer.innerHTML = '<p style="color: #666; text-align: center;">Masukkan SHU yang dibagikan untuk melihat ringkasan distribusi</p>';
                return;
            }
            
            let summaryHTML = '';
            let totalCalculated = 0;
            
            // Hitung untuk item SHU yang ada
            const shuInputs = document.querySelectorAll('#shu-list input[type="number"]');
            shuInputs.forEach(input => {
                const amount = parseFloat(input.value) || 0;
                const row = input.closest('.item-row');
                const nameInput = row.querySelector('.item-name input[type="text"]');
                const name = nameInput ? nameInput.value : 'Item SHU';
                
                // Cari persentase jika ada badge
                const percentageBadge = row.querySelector('.percentage-badge');
                let percentageText = '';
                if (percentageBadge) {
                    percentageText = percentageBadge.textContent;
                }
                
                const actualPercentage = shuTotal > 0 ? Math.round((amount / shuTotal) * 100) : 0;
                
                summaryHTML += `
                    <div class="summary-item">
                        <h5>${name}</h5>
                        <div class="summary-value">Rp ${formatRupiah(amount)}</div>
                        <div class="summary-percentage">${actualPercentage}% ${percentageText ? '(target: ' + percentageText + ')' : ''}</div>
                    </div>
                `;
                
                totalCalculated += amount;
            });
            
            // Tambahkan total
            summaryHTML += `
                <div class="summary-item" style="background-color: #e8f0fe; border: 2px solid #2c5aa0;">
                    <h5>TOTAL ALOKASI SHU</h5>
                    <div class="summary-value">Rp ${formatRupiah(totalCalculated)}</div>
                    <div class="summary-percentage">${shuTotal > 0 ? Math.round((totalCalculated / shuTotal) * 100) : 0}% dari SHU</div>
                </div>
            `;
            
            summaryContainer.innerHTML = summaryHTML;
        }
        
        // Format angka menjadi format Rupiah
        function formatRupiah(angka) {
            return new Intl.NumberFormat('id-ID', {
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(angka);
        }
        
        // Fungsi untuk menambah item pendapatan baru
        function tambahItemPendapatan() {
            pendapatanCounter++;
            const newId = `pendapatan-tambahan-${pendapatanCounter}`;
            const newRowId = `${newId}-row`;
            
            const newItemHTML = `
                <div class="item-row" id="${newRowId}">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Pendapatan Tambahan ${pendapatanCounter}" 
                               data-id="${newId}" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="${newId}" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-remove" onclick="removeItem('${newRowId}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('pendapatan-list').insertAdjacentHTML('beforeend', newItemHTML);
            
            // Tambahkan info data untuk item baru
            infoData[newId] = {
                title: `Pendapatan Tambahan ${pendapatanCounter}`,
                category: 'income',
                definition: 'Item pendapatan tambahan yang ditambahkan secara manual.',
                examples: [
                    'Sesuaikan dengan jenis pendapatan tambahan koperasi'
                ],
                sources: [
                    'Bukti penerimaan kas/bank',
                    'Nota/kwitansi'
                ],
                tips: [
                    'Pastikan dokumentasi lengkap',
                    'Klasifikasikan dengan benar',
                    'Transparan dalam pelaporan'
                ],
                regulation: 'PSAK No. 23 tentang Pendapatan',
                exampleNumbers: [1000000, 2500000, 5000000, 7500000]
            };
            
            alert(`Item pendapatan baru telah ditambahkan. Anda dapat mengedit namanya.`);
        }
        
        // Fungsi untuk menambah item beban baru
        function tambahItemBeban() {
            bebanCounter++;
            const newId = `beban-tambahan-${bebanCounter}`;
            const newRowId = `${newId}-row`;
            
            const newItemHTML = `
                <div class="item-row" id="${newRowId}">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Beban Tambahan ${bebanCounter}" 
                               data-id="${newId}" onchange="updateItemName(this)">
                    </div>
                    <div class="item-amount">
                        <input type="number" id="${newId}" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-remove" onclick="removeItem('${newRowId}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('beban-list').insertAdjacentHTML('beforeend', newItemHTML);
            
            // Tambahkan info data untuk item baru
            infoData[newId] = {
                title: `Beban Tambahan ${bebanCounter}`,
                category: 'expense',
                definition: 'Item beban tambahan yang ditambahkan secara manual.',
                examples: [
                    'Sesuaikan dengan jenis beban tambahan koperasi'
                ],
                sources: [
                    'Bukti pengeluaran kas/bank',
                    'Nota/kwitansi'
                ],
                tips: [
                    'Pastikan dokumentasi lengkap',
                    'Klasifikasikan dengan benar',
                    'Transparan dalam pelaporan'
                ],
                regulation: 'PSAK No. 2 tentang Laporan Arus Kas',
                exampleNumbers: [500000, 1000000, 2000000, 3000000]
            };
            
            alert(`Item beban baru telah ditambahkan. Anda dapat mengedit namanya.`);
        }
        
        // Fungsi untuk menambah item alokasi SHU baru
        function tambahItemSHU() {
            shuCounter++;
            const newId = `shu-tambahan-${shuCounter}`;
            const newRowId = `${newId}-row`;
            
            const newItemHTML = `
                <div class="item-row" id="${newRowId}">
                    <div class="item-name">
                        <input type="text" class="edit-input" value="Alokasi SHU Tambahan ${shuCounter}" 
                               data-id="${newId}" onchange="updateItemName(this)">
                        <span class="percentage-badge">0%</span>
                    </div>
                    <div class="item-amount">
                        <input type="number" id="${newId}" value="0" 
                               placeholder="Jumlah (Rp)" oninput="hitungTotal()">
                    </div>
                    <div class="item-actions">
                        <button class="btn btn-remove" onclick="removeItem('${newRowId}')">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            `;
            
            document.getElementById('shu-list').insertAdjacentHTML('beforeend', newItemHTML);
            
            // Tambahkan info data untuk item baru
            infoData[newId] = {
                title: `Alokasi SHU Tambahan ${shuCounter}`,
                category: 'shu',
                definition: 'Item alokasi SHU tambahan yang ditambahkan secara manual.',
                examples: [
                    'Sesuaikan dengan jenis alokasi SHU tambahan koperasi'
                ],
                sources: [
                    'Keputusan RAT tentang alokasi SHU'
                ],
                tips: [
                    'Pastikan sesuai dengan AD/ART koperasi',
                    'Transparan dalam penentuan alokasi',
                    'Dokumentasikan keputusan RAT'
                ],
                regulation: 'AD/ART Koperasi',
                exampleNumbers: [500000, 1000000, 1500000, 2000000]
            };
            
            alert(`Item alokasi SHU baru telah ditambahkan. Anda dapat mengedit namanya.`);
        }
        
        // Fungsi untuk menghapus item
        function removeItem(rowId) {
            if (confirm('Apakah Anda yakin ingin menghapus item ini?')) {
                const row = document.getElementById(rowId);
                if (row) {
                    row.remove();
                    hitungTotal();
                }
            }
        }
        
        // Fungsi untuk update nama item
        function updateItemName(input) {
            const itemId = input.getAttribute('data-id');
            const newName = input.value;
            
            // Update info data jika ada
            if (infoData[itemId]) {
                infoData[itemId].title = newName;
            }
            
            hitungTotal();
        }
        
        // Fungsi untuk menampilkan modal informasi
        function showInfoModal(infoId) {
            const info = infoData[infoId];
            if (!info) {
                alert('Informasi untuk item ini belum tersedia.');
                return;
            }
            
            // Set judul modal
            document.getElementById('modalTitle').textContent = info.title;
            
            // Tentukan ikon dan warna berdasarkan kategori
            let categoryIcon, categoryClass, categoryText;
            if (info.category === 'income') {
                categoryIcon = 'fa-arrow-down';
                categoryClass = 'income-icon';
                categoryText = 'PENDAPATAN';
            } else if (info.category === 'expense') {
                categoryIcon = 'fa-arrow-up';
                categoryClass = 'expense-icon';
                categoryText = 'BEBAN';
            } else {
                categoryIcon = 'fa-hand-holding-usd';
                categoryClass = 'shu-icon';
                categoryText = 'SISA HASIL USAHA';
            }
            
            // Buat konten modal
            let modalContent = `
                <div class="info-category">
                    <div class="category-icon ${categoryClass}">
                        <i class="fas ${categoryIcon}"></i>
                    </div>
                    <div>
                        <h3 style="margin: 0; color: #2c5aa0;">${info.title}</h3>
                        <p style="margin: 0; color: #666; font-size: 14px;">Kategori: ${categoryText}</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <h4><i class="fas fa-book"></i> Definisi</h4>
                    <div class="info-content">
                        <p>${info.definition}</p>
                    </div>
                </div>
                
                <div class="info-item">
                    <h4><i class="fas fa-list"></i> Contoh</h4>
                    <div class="info-content">
                        <ul>
                            ${info.examples.map(example => `<li>${example}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div class="info-item">
                    <h4><i class="fas fa-database"></i> Sumber Data</h4>
                    <div class="info-content">
                        <ul>
                            ${info.sources.map(source => `<li>${source}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div class="info-item">
                    <h4><i class="fas fa-lightbulb"></i> Tips Pencatatan</h4>
                    <div class="info-content">
                        <ul>
                            ${info.tips.map(tip => `<li>${tip}</li>`).join('')}
                        </ul>
                    </div>
                </div>
                
                <div class="info-item">
                    <h4><i class="fas fa-balance-scale"></i> Regulasi</h4>
                    <div class="regulation-note">
                        <p><strong>${info.regulation}</strong></p>
                    </div>
                </div>
            `;
            
            // Tambahkan contoh angka jika ada
            if (info.exampleNumbers && info.exampleNumbers.length > 0) {
                modalContent += `
                    <div class="info-item">
                        <h4><i class="fas fa-calculator"></i> Contoh Angka</h4>
                        <p>Klik salah satu untuk mengisi otomatis:</p>
                        <div class="quick-example">
                            ${info.exampleNumbers.map(num => `
                                <div class="example-number" data-value="${num}">
                                    Rp ${formatRupiah(num)}
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            }
            
            // Set konten modal
            document.getElementById('modalBody').innerHTML = modalContent;
            
            // Tampilkan modal
            document.getElementById('infoModal').style.display = 'flex';
            
            // Tambahkan event listener untuk contoh angka
            document.querySelectorAll('.example-number').forEach(item => {
                item.addEventListener('click', function() {
                    const value = this.getAttribute('data-value');
                    const input = document.getElementById(infoId);
                    if (input) {
                        input.value = value;
                        hitungTotal();
                        alert(`Nilai ${formatRupiah(value)} telah dimasukkan ke ${info.title}`);
                    }
                });
            });
        }
        
        // Fungsi untuk mengisi data contoh
        document.getElementById('isi-contoh-btn').addEventListener('click', function() {
            // Informasi koperasi
            document.getElementById('nama-koperasi').value = 'Koperasi Sejahtera Mandiri';
            document.getElementById('periode-laporan').value = '2023';
            document.getElementById('satuan-mata-uang').value = 'Rupiah (Rp)';
            
            // Data pendapatan contoh
            document.getElementById('pendapatan-anggota').value = '25000000';
            document.getElementById('pendapatan-operasional').value = '15000000';
            document.getElementById('pendapatan-non-operasional').value = '5000000';
            document.getElementById('pendapatan-lain').value = '3000000';
            
            // Data beban contoh
            document.getElementById('beban-operasional').value = '12000000';
            document.getElementById('beban-administrasi').value = '8000000';
            document.getElementById('beban-penyusutan').value = '3000000';
            document.getElementById('beban-lain').value = '2000000';
            
            // SHU yang dibagikan
            document.getElementById('shu-dibagikan').value = '18000000';
            
            // Hitung alokasi SHU otomatis
            hitungAlokasiSHU();
            
            alert('Data contoh telah dimasukkan. Alokasi SHU telah dihitung otomatis.');
        });
        
        // Fungsi untuk menghitung SHU otomatis
        document.getElementById('calculate-shu-btn').addEventListener('click', hitungAlokasiSHU);
        
        // Fungsi untuk menambah item pendapatan
        document.getElementById('add-pendapatan-btn').addEventListener('click', tambahItemPendapatan);
        
        // Fungsi untuk menambah item beban
        document.getElementById('add-beban-btn').addEventListener('click', tambahItemBeban);
        
        // Fungsi untuk menambah item SHU
        document.getElementById('add-shu-btn').addEventListener('click', tambahItemSHU);
        
        // Fungsi untuk menghapus data
        document.getElementById('clear-btn').addEventListener('click', function() {
            if (confirm('Apakah Anda yakin ingin menghapus semua data?')) {
                // Reset semua input
                const allInputs = document.querySelectorAll('input[type="text"], input[type="number"]');
                allInputs.forEach(input => {
                    input.value = '';
                });
                
                // Reset informasi koperasi ke default
                document.getElementById('periode-laporan').value = '2023';
                document.getElementById('satuan-mata-uang').value = 'Rupiah (Rp)';
                
                // Reset semua total
                const allTotals = document.querySelectorAll('span[id^="total"], span[id^="laba"]');
                allTotals.forEach(span => {
                    span.textContent = '0';
                });
                
                // Reset ringkasan
                document.getElementById('distributionSummary').innerHTML = '<p style="color: #666; text-align: center;">Masukkan SHU yang dibagikan untuk melihat ringkasan distribusi</p>';
                
                alert('Semua data telah dihapus.');
            }
        });
        
        // Fungsi untuk mendownload sebagai Excel
        document.getElementById('download-btn').addEventListener('click', function() {
            // Ambil data dari form
            const namaKoperasi = document.getElementById('nama-koperasi').value || 'Koperasi';
            const periodeLaporan = document.getElementById('periode-laporan').value || '2023';
            const satuanMataUang = document.getElementById('satuan-mata-uang').value || 'Rupiah (Rp)';
            
            // Siapkan data untuk Excel
            const data = [
                [`LAPORAN LABA RUGI ${namaKoperasi.toUpperCase()}`],
                [`Periode: Tahun ${periodeLaporan}`],
                [`Satuan Mata Uang: ${satuanMataUang}`],
                []
            ];
            
            // Tambahkan pendapatan
            data.push(["A. PENDAPATAN", ""]);
            const pendapatanItems = document.querySelectorAll('#pendapatan-list .item-row');
            pendapatanItems.forEach(row => {
                const nameInput = row.querySelector('.item-name input[type="text"]');
                const amountInput = row.querySelector('.item-amount input[type="number"]');
                if (nameInput && amountInput) {
                    data.push([`  ${nameInput.value}`, parseFloat(amountInput.value) || 0]);
                }
            });
            data.push(["  TOTAL PENDAPATAN", document.getElementById('total-pendapatan').textContent.replace(/\./g, '')]);
            data.push([]);
            
            // Tambahkan beban
            data.push(["B. BEBAN", ""]);
            const bebanItems = document.querySelectorAll('#beban-list .item-row');
            bebanItems.forEach(row => {
                const nameInput = row.querySelector('.item-name input[type="text"]');
                const amountInput = row.querySelector('.item-amount input[type="number"]');
                if (nameInput && amountInput) {
                    data.push([`  ${nameInput.value}`, parseFloat(amountInput.value) || 0]);
                }
            });
            data.push(["  TOTAL BEBAN", document.getElementById('total-beban').textContent.replace(/\./g, '')]);
            data.push([]);
            
            // Tambahkan laba/rugi
            data.push(["C. LABA/RUGI SEBELUM SHU", ""]);
            data.push(["  Laba/Rugi Sebelum SHU", document.getElementById('laba-rugi-sebelum-shu').textContent.replace(/\./g, '')]);
            
            // SHU yang dibagikan
            const shuDibagikanName = document.querySelector('[data-id="shu-dibagikan"]').value || 'Sisa Hasil Usaha (SHU) yang Dibagikan';
            data.push([`  ${shuDibagikanName}`, parseFloat(document.getElementById('shu-dibagikan').value) || 0]);
            data.push(["  LABA/RUGI BERSIH", document.getElementById('laba-rugi-bersih').textContent.replace(/\./g, '')]);
            data.push([]);
            
            // Tambahkan alokasi SHU
            data.push(["D. ALOKASI SISA HASIL USAHA (SHU)", ""]);
            const shuItems = document.querySelectorAll('#shu-list .item-row');
            shuItems.forEach(row => {
                const nameInput = row.querySelector('.item-name input[type="text"]');
                const amountInput = row.querySelector('.item-amount input[type="number"]');
                if (nameInput && amountInput) {
                    data.push([`  ${nameInput.value}`, parseFloat(amountInput.value) || 0]);
                }
            });
            data.push(["  TOTAL ALOKASI SHU", document.getElementById('total-alokasi-shu').textContent.replace(/\./g, '')]);
            data.push([]);
            
            // Tambahkan catatan
            data.push(["Catatan:", ""]);
            data.push(["1. Format sesuai standar akuntansi koperasi Indonesia", ""]);
            data.push(["2. Alokasi SHU sesuai dengan AD/ART Koperasi", ""]);
            data.push(["3. Laporan harus ditandatangani oleh pengurus dan pengawas koperasi", ""]);
            data.push(["", ""]);
            data.push(["Disetujui oleh:", ""]);
            data.push(["Ketua Pengurus", ""]);
            data.push(["", ""]);
            data.push(["(__________________________)", ""]);
            data.push(["", ""]);
            data.push(["Ketua Pengawas", ""]);
            data.push(["", ""]);
            data.push(["(__________________________)", ""]);
            data.push(["", ""]);
            data.push(["Mengetahui:", ""]);
            data.push(["Sekretaris", ""]);
            data.push(["", ""]);
            data.push(["(__________________________)", ""]);
            
            // Buat worksheet
            const ws = XLSX.utils.aoa_to_sheet(data);
            
            // Atur lebar kolom
            const wscols = [
                {wch: 50}, // Kolom uraian
                {wch: 20}  // Kolom jumlah
            ];
            ws['!cols'] = wscols;
            
            // Buat workbook
            const wb = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(wb, ws, "Laba Rugi");
            
            // Generate nama file
            const fileName = `Laporan Laba Rugi ${namaKoperasi} ${periodeLaporan}.xlsx`;
            
            // Download file
            XLSX.writeFile(wb, fileName);
            
            alert(`File ${fileName} berhasil diunduh.`);
        });
        
        // Tutup modal ketika klik close button
        document.getElementById('closeModal').addEventListener('click', function() {
            document.getElementById('infoModal').style.display = 'none';
        });
        
        // Tutup modal ketika klik di luar modal
        document.getElementById('infoModal').addEventListener('click', function(e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
        
        // Tutup modal dengan tombol ESC
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                document.getElementById('infoModal').style.display = 'none';
            }
        });
        
        // Hitung total saat halaman pertama kali dimuat
        document.addEventListener('DOMContentLoaded', function() {
            hitungTotal();
        });
    </script>
</body>
</html>.
